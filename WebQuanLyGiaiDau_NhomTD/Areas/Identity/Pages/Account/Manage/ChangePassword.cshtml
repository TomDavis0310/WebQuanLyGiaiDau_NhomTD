@page
@model ChangePasswordModel
@{
    ViewData["Title"] = "Đổi mật khẩu";
    ViewData["ActivePage"] = ManageNavPages.ChangePassword;
}

<link rel="stylesheet" href="~/css/change-password-new.css" asp-append-version="true" />

<div class="change-password-container">
    <div class="change-password-content-wrapper">
        <!-- No header needed here - using manage layout header -->
        
        <div class="row g-4">
        <!-- Password Tips Section -->
        <div class="col-lg-4">
            <div class="password-tips">
                <h5><i class="bi bi-lightbulb-fill me-2"></i>Mẹo tạo mật khẩu mạnh</h5>
                <ul>
                    <li>Ít nhất 8 ký tự</li>
                    <li>Bao gồm chữ hoa và chữ thường</li>
                    <li>Có ít nhất 1 số</li>
                    <li>Có ít nhất 1 ký tự đặc biệt</li>
                    <li>Không sử dụng thông tin cá nhân</li>
                    <li>Tránh các mật khẩu phổ biến</li>
                </ul>
            </div>
        </div>

        <!-- Form Section -->
        <div class="col-lg-8">
            <div class="change-password-form-container">
            <partial name="_StatusMessage" for="StatusMessage" />
            
            <form id="change-password-form" method="post">
                <div asp-validation-summary="ModelOnly" class="validation-summary" role="alert"></div>

                <!-- Current Password -->
                <div class="form-group-enhanced">
                    <div class="input-container">
                        <i class="input-icon bi bi-lock-fill"></i>
                        <input asp-for="Input.OldPassword" 
                               type="password" 
                               class="form-control-modern" 
                               autocomplete="current-password" 
                               aria-required="true" 
                               placeholder=" " 
                               id="currentPassword" />
                        <label class="floating-label">Mật khẩu hiện tại</label>
                        <button type="button" class="password-toggle" data-target="currentPassword">
                            <i class="bi bi-eye-fill"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Input.OldPassword" class="field-error"></span>
                </div>

                <!-- New Password -->
                <div class="form-group-enhanced">
                    <div class="input-container">
                        <i class="input-icon bi bi-key-fill"></i>
                        <input asp-for="Input.NewPassword" 
                               type="password" 
                               class="form-control-modern" 
                               autocomplete="new-password" 
                               aria-required="true" 
                               placeholder=" " 
                               id="newPassword" />
                        <label class="floating-label">Mật khẩu mới</label>
                        <button type="button" class="password-toggle" data-target="newPassword">
                            <i class="bi bi-eye-fill"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Input.NewPassword" class="field-error"></span>
                    
                    <!-- Password Strength Indicator -->
                    <div class="password-strength" id="passwordStrength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <div class="strength-text" id="strengthText">Nhập mật khẩu để kiểm tra độ mạnh</div>
                    </div>
                </div>

                <!-- Confirm Password -->
                <div class="form-group-enhanced">
                    <div class="input-container">
                        <i class="input-icon bi bi-check2-square"></i>
                        <input asp-for="Input.ConfirmPassword" 
                               type="password" 
                               class="form-control-modern" 
                               autocomplete="new-password" 
                               aria-required="true" 
                               placeholder=" " 
                               id="confirmPassword" />
                        <label class="floating-label">Xác nhận mật khẩu mới</label>
                        <button type="button" class="password-toggle" data-target="confirmPassword">
                            <i class="bi bi-eye-fill"></i>
                        </button>
                    </div>
                    <span asp-validation-for="Input.ConfirmPassword" class="field-error"></span>
                    
                    <!-- Password Match Indicator -->
                    <div class="password-match" id="passwordMatch">
                        <i class="bi bi-check-circle-fill"></i>
                        <span>Mật khẩu khớp</span>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="form-actions">
                    <button type="submit" class="btn-update-password" id="updatePasswordBtn">
                        <i class="bi bi-shield-check"></i>
                        <span>Cập nhật mật khẩu</span>
                        <div class="btn-loading">
                            <div class="spinner"></div>
                        </div>
                    </button>

                    <div class="security-notice">
                        <i class="bi bi-info-circle-fill"></i>
                        <span>Sau khi đổi mật khẩu, bạn sẽ cần đăng nhập lại trên tất cả thiết bị</span>
                    </div>
                </div>
            </form>
        </div>
    </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="~/js/change-password.js" asp-append-version="true"></script>
}
